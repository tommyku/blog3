<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0" name="viewport" /><meta content="Explaining Base64 encoding - Tommy Ku&#39;s Blog - Random thoughts, stories and tutorials of a web dev" name="title" /><meta content="Web developer Tommy Ku talks about his experience in work, learning and life." name="description" /><meta content="Tommy Ku" name="author" /><meta content="Explaining Base64 encoding - Tommy Ku&#39;s Blog - Random thoughts, stories and tutorials of a web dev" property="og:title" /><meta content="article" property="og:type" /><meta content="/assets/images/banner.jpg" property="og:image" /><link href="/assets/images/author.jpg" rel="icon" type="image/png" /><link href="/atom.xml" rel="alternate" title="Tommy Ku&#39;s Method Stub" type="application/atom+xml" /><link href="https://webmention.tkcom.workers.dev/" rel="webmention" /><title>Explaining Base64 encoding - Tommy Ku&#39;s Blog</title><link href="/style/gutenberg.css" rel="stylesheet" /><link href="/style/prism.css" rel="stylesheet" /><meta content="Nanoc 4.11.15" name="generator" /></head><body><header><h2 class="h-card"><img alt="Profile pic of Tommy Ku" class="author u-photo" src="/assets/images/author.jpg" /><span class="p-name">Tommy Ku</span>'s Blog</h2><p><i>Reading and thinking</i></p></header><nav><a href="/">Index</a><a href="https://tommyku.com">About Me</a><a href="https://angel.co/tommyku">AngelList</a><a href="https://www.linkedin.com/in/tommy-chun-kit-ku-65aba999">LinkedIn</a><a rel="me" href="https://github.com/tommyku">GitHub</a><a href="/atom.xml">Feed</a></nav><main class="h-entry" id="main"><section id="meta"><h1 class="p-name">Explaining Base64 encoding</h1><i>Posted on&nbsp;<time class="dt-published" datetime="2013-12-28T00:00:00+08:00">December 28, 2013</time>&nbsp;by&nbsp;<span class="p-author">Tommy Ku</span></i><section id="old"><span class="icon">&#9888;</span><p>This post is more than 2 years old, it may contain outdated information</p></section></section><section class="e-content" id="content"><p>Base64 is a common encoding scheme for representing binary data with a set of 64 ASCII printable characters. Web designer and developers might come across base64 when trying to send machine generated email or embed image into a page. I am going to go through some of its usages and working mechanism.</p>

<h2 id="what-is-base64-for">What is base64 for?</h2>

<p>Usually base64 hides within the interaction between machines instead of that with human, but when generating emails with attachment, or trying to embed an image into a webpage/CSS file, base64 will come handy.</p>

<p>The MIME standard supports for using base64 as a transfer encoding in which an arbitrary file can be encoded into a base64 string and sent out as email attachment. When generating email with attachment, base64 is particularily useful. See below for an example.</p>

<pre><code>MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=randomSeparator

--randomSeparator
Content-Type: text/plain

This is the body of the email

--randomSeparator
Content-Type: application/zip; name="attachment.zip"
Content-Transfer-Encoding: base64
Content-Disposition: attachment

YXNrZGphc2tka2phc2p3cXJocWtqd3JhaHNka2pzYWRrYXNoanNhZ2Noa2FzY3dxaw==
</code></pre>

<p>Near the end of this email there is an attachment with its content encoded in base64 so you will not see strange characters in the generated email. Just letters, digites, plus a few symbols.</p>

<p>Another usage for base64 in web development is to embed an image into a webpage. <br>
Embed? Yes.</p>

<p>Most of the time when browser loads a webpage, first the HTML document containing the skeleton of the site is loaded. Then browser then looks for any image/script/css/etc in the page that need to be downloaded. In other words, when we first see a webpage the images are not loaded, leaving a awkward white blank in the display before the images are done loading.</p>

<figure>
<img src="./screenshot1.png">
<figcaption>Load sequence in a webpage</figcaption>
</figure>

<p>The gap between finishing loading html and image makes a bad impression to new visitors. In slow network such as mobile network, we want to avoid this. Using base64, external resources can now be in-line included in a html document. As mentioned, base64 can be used to covert binary data in a file into printable characters. By the same token web developer can embed images into a page. I draw a snailâ€™s picture to illustrate this, following the actual html code you would see in the source code of this web page.</p>

<figure>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH3QwdCiQA+YijYgAAAT1JREFUWMPtmEkOwzAIRY3F/a+cLiylkTGzMyzwrqoDD/gFGjiOo33v9PbJU1iFVViFVViF9fjB6TMAtNbO+Q0A6iwfj9CTWQKQ2uLcCEBLgsmOixI4i1c+wavRmeuypC3ZkNfNuGmvQ1dtxb5NkmEgDfagw8LFWBqEO7LSB5nqArekgfthAoAFQtHW8vkp80v04X5cvhrh9KTG32MSWcqRiyogku4tULJTRIo4dVEa3ySUJdNZUC4qi9q6Pb3LhFnkmJW8QEClI8s2WdbushhLQ6Dv3LJv0YbiTR4muwOX0aS2MJwSYYzIoynVt5KD6JZd/hwaKpyL3rH3WnqVZV/Y1fNMWMl/GeokZb+1CFDwumUa0ppAxq5LWGqVt2ElA6Bl/e8EL75pFljxxeZEd6Sni1hvbAqrsAqrsF45P7k6+UiRTNsxAAAAAElFTkSuQmCC">
<figcaption>A snail image embedded in to the page with base64</figcaption>
</figure>

<pre><code class="language-html">&lt;img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH3QwdCiQA+YijYgAAAT1JREFUWMPtmEkOwzAIRY3F/a+cLiylkTGzMyzwrqoDD/gFGjiOo33v9PbJU1iFVViFVViF9fjB6TMAtNbO+Q0A6iwfj9CTWQKQ2uLcCEBLgsmOixI4i1c+wavRmeuypC3ZkNfNuGmvQ1dtxb5NkmEgDfagw8LFWBqEO7LSB5nqArekgfthAoAFQtHW8vkp80v04X5cvhrh9KTG32MSWcqRiyogku4tULJTRIo4dVEa3ySUJdNZUC4qi9q6Pb3LhFnkmJW8QEClI8s2WdbushhLQ6Dv3LJv0YbiTR4muwOX0aS2MJwSYYzIoynVt5KD6JZd/hwaKpyL3rH3WnqVZV/Y1fNMWMl/GeokZb+1CFDwumUa0ppAxq5LWGqVt2ElA6Bl/e8EL75pFljxxeZEd6Sni1hvbAqrsAqrsF45P7k6+UiRTNsxAAAAAElFTkSuQmCC /&gt;
</code></pre>

<p>Previously I have introduced two of many usages of base64. For the next part, I will explain how to turn data into a base64 string you have seen above.</p>

<h2 id="how-base64-works">How base64 works?</h2>

<p>A sequence of bits is coverted into base64 by taking 24 bits (or 3*8 bits), and write them as 4 base64 characters. I will use this base64 dictionary with a padding character <code>=</code>.</p>

<pre><code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/
</code></pre>

<p>Example 1 and 2 illustrates the base cases of turning strings of 3 or less characters into a base64 string. For any bit stream longer than 24 bits, iterate the steps of example 1 and 2 for every 24 bits will do.</p>

<pre><code>Example 1

#1 Gathering 24 bits.
input:   A        B        C
ASCII:   01000001 01000010 01000011
         -------- |||||||| --------

#2 Dividing them into 6-bits chunks.
6-bits:  010000 010100 001001 000011
         ------ --|||| ||||-- ------
Index :  16     20     9      3
base64:  Q      U      J      D
</code></pre>

<pre><code>Example 2

#1 Do not have 24-bits
input:   A        B
ASCII:   01000001 01000010
         -------- ||||||||

#2 Dividing them into 6-bits chunks, fill in the missing bits with 0
6-bits:  010000 010100 001000
         ------ --|||| ||||XX
Index :  16     20     8
base64:  Q      U      I

#3 Pad the base64 string until it gets a length of 4
QUH ---&gt; QUI=
</code></pre>

<p>To test its correctness, run btoa(string) in any modern browser JavaScript console. The function encodes any string into its base64 encoded form.</p>

<p>Obviously, the input is not limited to ASCII string. The essence is to take 24 bits from the data source and represent it with 4 base64 characters. A drawback of base64 is that the data ends up 33.3% (4/3 in fraction) longer than the original.</p>
</section><section id="suggestions"><h2>You could also look at...</h2><ul id="article-list"><li><a href="../website-analytics-for-lazy-people/">Website analytics for lazy people</a><p class="abstract">Being lazy and against self-hosting public-facing services, I made others do it for me</p></li><li><a href="../5-reasons-every-web-developer-should-make-a-startpage/">5 reasons every web developer should make a startpage</a><p class="abstract">Why every web developer should be building startpages at some point in their web development journey</p></li><li><a href="../integrating-two-step-two-factor-authentication-into-rails-4-project-with-devise/">Integrating two-step two-factor authentication into Rails 4 project with devise</a><p class="abstract">How I worked around Devise and a two-factor auth library to implement two-step (not to be confused with two-factor) auth that wasn't available in gems</p></li></ul></section><p>This post first appeared on&nbsp;<a class="u-url" href="https://blog.tommyku.com/blog/explaining-base64-encoding/" id="permalink">Tommy Ku&#39;s blog</a>. Permalink: <a class="u-url" href="https://blog.tommyku.com/blog/explaining-base64-encoding/" id="permalink">https://blog.tommyku.com/blog/explaining-base64-encoding/</a></p><h2>About the author</h2><section class="h-card" id="bio"><img alt="Profile pic of Tommy Ku" class="u-photo" src="/assets/images/author.jpg" /><section class="p-note"><p><i><span class="p-author">Tommy Ku</span>, a&nbsp;<span class="p-country-name">Hong Kong</span>-based&nbsp;<span class="p-job-title">Software Engineer</span>&nbsp;experienced developing PHP and Java-based web solutions and passionate in Web technology.</i></p><p><i>Also a hobbyist digital and film photographer.</i></p></section></section></main><script src="/js/prism.js" type="text/javascript"></script><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = "https://blog.tommyku.com/blog/explaining-base64-encoding/";
  this.page.identifier = "explaining-base64-encoding";
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//methodstub.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a ,="" href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><hr /><footer></footer><a class="unloaded" href="https://blog.tommyku.com/blog/website-analytics-for-lazy-people" id="tracking-status" title="I know you viewed this page"></a><img onload="javascript: document.querySelector(&#39;#tracking-status&#39;).classList.replace(&#39;unloaded&#39;, &#39;loaded&#39;)" src="https://blog-view.tkcom.workers.dev/?https://blog.tommyku.com/blog/explaining-base64-encoding/" style="width: 0px; height: 0px; margin: 0; padding: 0; visibility: hidden;" /></body></html>